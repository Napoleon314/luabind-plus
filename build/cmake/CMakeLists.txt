cmake_minimum_required (VERSION 3.4)
project (luabind_plus_test)

if(NOT WIN32)
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++14")
endif()
if(MSVC AND NOT MSVC14)
	message(WARNING "This project needs to be compiled by Visual Studio 2015 and above.")
endif()

set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${PROJECT_BINARY_DIR}/../../bin/${BUILD_CONFIG_PATH})
set(CMAKE_COMPILE_PDB_OUTPUT_DIRECTORY ${PROJECT_BINARY_DIR}/../../bin/${BUILD_CONFIG_PATH})
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${PROJECT_BINARY_DIR}/../../bin/${BUILD_CONFIG_PATH})
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${PROJECT_BINARY_DIR}/../../bin/${BUILD_CONFIG_PATH})
foreach( OUTPUTCONFIG ${CMAKE_CONFIGURATION_TYPES} )
    string( TOUPPER ${OUTPUTCONFIG} OUTPUTCONFIG_UPPER )
    set( CMAKE_ARCHIVE_OUTPUT_DIRECTORY_${OUTPUTCONFIG_UPPER} ${PROJECT_BINARY_DIR}/../../bin/${BUILD_CONFIG_PATH}/${OUTPUTCONFIG} )
    set( CMAKE_COMPILE_PDB_OUTPUT_DIRECTORY_${OUTPUTCONFIG_UPPER} ${PROJECT_BINARY_DIR}/../../bin/${BUILD_CONFIG_PATH}/${OUTPUTCONFIG} )
    set( CMAKE_LIBRARY_OUTPUT_DIRECTORY_${OUTPUTCONFIG_UPPER} ${PROJECT_BINARY_DIR}/../../bin/${BUILD_CONFIG_PATH}/${OUTPUTCONFIG} )
    set( CMAKE_RUNTIME_OUTPUT_DIRECTORY_${OUTPUTCONFIG_UPPER} ${PROJECT_BINARY_DIR}/../../bin/${BUILD_CONFIG_PATH}/${OUTPUTCONFIG} )
endforeach( OUTPUTCONFIG CMAKE_CONFIGURATION_TYPES )

file(GLOB_RECURSE VTD_INC ${PROJECT_BINARY_DIR} "../../include/vtd/*")
file(GLOB_RECURSE LUABIND_INC ${PROJECT_BINARY_DIR} "../../include/luabind/*")

file(GLOB_RECURSE LUABIND_TEST_GROUP ${PROJECT_BINARY_DIR} "../../test/*")
file(GLOB_RECURSE LUABIND_TEST_CPP ${PROJECT_BINARY_DIR} "../../test/*.cpp")

SOURCE_GROUP("vtd" FILES ${VTD_INC})
SOURCE_GROUP("luabind" FILES ${LUABIND_INC})
SOURCE_GROUP("test" FILES ${LUABIND_TEST_GROUP})

include_directories(${PROJECT_BINARY_DIR} "../../include")

add_executable(luabind_plus_test ${VTD_INC} ${LUABIND_INC} ${LUABIND_TEST_CPP})
